<div class="row">
  <div class="col-xs-12">
    <div class="centered">
      <h4>Available Brokers</h4>
      <table class="table" [ngClass]="{ 'table-hover': brokers && brokers.length }">
        <tbody *ngIf="!brokers || !brokers.length">
          <tr>
            <td>No Brokers defined...</td>
          </tr>
        </tbody>
        <tbody *ngIf="brokers && brokers.length">
          <tr *ngFor="let broker of brokers; let i = index">
            <td style="width: 30%;">{{ broker.name }}</td>
            <td>{{ broker.url }}</td>
            <td class="text-right fit">
              <button type="button" class="btn btn-danger" (click)="deleteBroker(i)"><span class="fa fw fa-trash"></span></button>
            </td>
          </tr>
        </tbody>
      </table>
      <form [formGroup]="addForm" (ngSubmit)="addBroker()">
        <h4>Add Broker</h4>
        <table class="table">
          <tbody>
            <tr>
              <td style="width: 30%;">
                <div [ngClass]="{'has-error': nameHasErrors()}">
                  <input type="text" class="form-control" id="name" placeholder="Name" formControlName="name">
                </div>
              </td>
              <td>
                <div [ngClass]="{'has-error': urlHasErrors()}">
                  <input type="text" class="form-control" id="url" placeholder="Url" formControlName="url">
                </div>
              </td>
              <td class="text-right fit">
                <button type="submit" class="btn btn-success" [disabled]="!addForm.valid"><span class="fa fw fa-plus"></span></button>
              </td>
            </tr>
          </tbody>
        </table>
      </form>
      <ul *ngIf="nameHasErrors() || urlHasErrors()" class="errorlist">
        <li *ngIf="nameHasErrors() && nameControl.errors?.required">Name is required</li>
        <li *ngIf="nameHasErrors() && nameControl.errors?.broker">Name already in use</li>
        <li *ngIf="urlHasErrors() && urlControl.errors?.required">Url is required</li>
      </ul>
    </div>
  </div>
</div>
